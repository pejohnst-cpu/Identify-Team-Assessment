<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ET/IDA Strengths Quiz</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<style>
body {font-family: "Segoe UI", Arial, sans-serif; margin: 2rem auto; max-width: 900px; background: #f9fafb; color: #111827;}
h1 {color: #0f172a; text-align: center;}
.hidden { display: none; }
button {background: #2563eb; color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 8px; cursor: pointer; margin-top: 1rem;}
button:hover { background: #1d4ed8; }
.question { background: #fff; border-radius: 12px; padding: 1.5rem; margin-bottom: 1rem; box-shadow: 0 2px 6px rgba(0,0,0,0.08);}
label { display: block; margin: 0.3rem 0; }
.report-section {border-radius: 12px; padding: 1.2rem; margin-bottom: 1rem; color: #fff;}
.theme {background: #2563eb;}
.style {background: #16a34a;}
.strength {background: #d97706;}
.archetype {background: #6b21a8;}
.value-add {background: #1e293b; color: #fef3c7;}
.progress-bar {background: rgba(255,255,255,0.3); border-radius: 6px; overflow: hidden; margin-top: 0.5rem;}
.progress {height: 12px; border-radius: 6px;}
.highlight {font-weight:bold;}
</style>
</head>
<body>
<h1>ET/IDA Strengths Quiz</h1>

<div id="quiz"></div>

<div id="report" class="hidden"></div>
<button id="downloadBtn" class="hidden" onclick="downloadPDF()">Download My Report</button>

<script>
// ===== Data =====
const questions = [
  {q:"When approaching a complex problem, you most often:", a:["Strategic Thinking","Execution","Relationship Building","Influence"]},
  {q:"Your team depends on you most for:", a:["Achiever","Collaborator","Innovator","Organizer"]},
  {q:"In uncertain situations, you typically:", a:["Problem-Solver","Optimist","Networker","Organizer"]},
  {q:"Your colleagues would describe your professional archetype as:", a:["Architect","Connector","Navigator","Guardian"]},
  {q:"When facing multiple priorities, you:", a:["Strategic Thinking","Achiever","Relationship Building","Influence"]},
  {q:"You contribute most to team discussions by:", a:["Analytical Thinking","Collaborating","Proposing new ideas","Clarifying processes"]},
  {q:"You notice a potential threat others might miss because:", a:["Strategic Thinking","Execution","Networking","Ethics"]},
  {q:"You prefer to solve problems by:", a:["Problem-Solving","Relationship Building","Planning","Creative Design"]},
  {q:"You feel most valued when:", a:["Delivering results","Helping others succeed","Bringing new ideas","Keeping order"]},
  {q:"In fast-changing environments, you:", a:["Adapt quickly","Rely on structure","Engage others","Ensure ethics"]},
  {q:"You motivate your team by:", a:["Setting vision","Supporting effort","Connecting people","Creating solutions"]},
  {q:"Your strongest skill in collaboration is:", a:["Strategic insight","Reliability","Empathy","Ethical guidance"]},
  {q:"When documenting processes, you:", a:["Create systems","Encourage feedback","Design tools","Ensure alignment"]},
  {q:"You excel at:", a:["Seeing trends","Executing tasks","Building relationships","Communicating ideas"]},
  {q:"Your team appreciates you for:", a:["Clarity of vision","Consistency","Connection","Integrity"]},
  {q:"You prioritize tasks based on:", a:["Strategic impact","Deadlines","Collaboration","Rules/standards"]},
  {q:"You handle conflict by:", a:["Analyzing objectively","Mediating","Connecting","Upholding fairness"]},
  {q:"You influence others by:", a:["Insightful advice","Demonstrating reliability","Fostering trust","Clear communication"]}
];

const categories = {
  "theme":["Strategic Thinking","Execution","Relationship Building","Influence"],
  "style":["Achiever","Collaborator","Innovator","Organizer","Communicator"],
  "strength":["Problem-Solver","Optimist","Networker","Organizer","Creative Designer","Reliable Executor"],
  "archetype":["Architect","Connector","Navigator","Guardian","Catalyst"]
};

const descriptions = {
  theme:{
    "Strategic Thinking":"You bring foresight, scanning for patterns and anticipating threats before they materialize. Your insight ensures ET/IDA stays ahead of emerging risks.",
    "Execution":"You ensure reliability and follow-through, building structured processes that give ET/IDA credibility.",
    "Relationship Building":"You embody empathy, humility, and kindness, strengthening ET/IDA‚Äôs partnerships and internal cohesion.",
    "Influence":"You communicate clearly and positively, ensuring ET/IDA‚Äôs work gains traction and buy-in."
  },
  style:{
    "Achiever":"You provide momentum and reliability, ensuring ET/IDA delivers on commitments.",
    "Collaborator":"You strengthen trust and manage conflict constructively, modeling ET/IDA‚Äôs core values.",
    "Innovator":"You generate new ideas and tools, advancing ET/IDA‚Äôs analytical capabilities.",
    "Organizer":"You create structures and workflows that make ET/IDA‚Äôs work repeatable and efficient.",
    "Communicator":"You ensure clarity and alignment in messaging both internally and externally."
  },
  strength:{
    "Problem-Solver":"You adapt under uncertainty, finding practical solutions that drive progress.",
    "Optimist":"You bring positivity and resilience, boosting team morale during challenging assessments.",
    "Networker":"You expand ET/IDA‚Äôs reach by building trusted interagency and external relationships.",
    "Creative Designer":"You make insights visual and actionable.",
    "Reliable Executor":"You deliver consistent follow-through.",
    "Organizer":"You create tools and frameworks to prioritize threats and organize workflows."
  },
  archetype:{
    "Architect":"You build systems and processes that make ET/IDA‚Äôs work rigorous and repeatable.",
    "Connector":"You bridge communities, ensuring ET/IDA is a trusted partner.",
    "Navigator":"You chart pathways through uncertainty, balancing priorities with realities.",
    "Guardian":"You safeguard integrity, ethics, and reliability within the team.",
    "Catalyst":"You energize and mobilize the team to act on insights."
  }
};

// ===== Build Quiz =====
const quizDiv = document.getElementById("quiz");
questions.forEach((q,i)=>{
  const div = document.createElement("div");
  div.className="question";
  let html=`<p><b>${i+1}. ${q.q}</b></p>`;
  q.a.forEach(a=>{
    html+=`<label><input type="radio" name="q${i}" value="${a}"> ${a}</label>`;
  });
  div.innerHTML=html;
  quizDiv.appendChild(div);
});
const btn=document.createElement("button");
btn.textContent="Finish Quiz";
btn.onclick=finishQuiz;
quizDiv.appendChild(btn);

let userResult={};

// ===== Calculate Results =====
function finishQuiz(){
  let answers={};
  for(let i=0;i<questions.length;i++){
    const val=document.querySelector(`input[name="q${i}"]:checked`)?.value;
    if(!val){ alert("Please answer all questions."); return; }
    answers[val]=(answers[val]||0)+1;
  }
  
  userResult={};
  for(let cat in categories){
    let topVal="",topCount=-1;
    categories[cat].forEach(item=>{
      if((answers[item]||0)>topCount){topCount=answers[item]; topVal=item;}
    });
    userResult[cat]=topVal;
    userResult[cat+"_percent"] = Math.round(((answers[topVal]||0)/questions.length)*100);
  }

  document.getElementById("quiz").classList.add("hidden");
  document.getElementById("report").classList.remove("hidden");
  document.getElementById("report").innerHTML=buildVisualReport(userResult);
  document.getElementById("downloadBtn").classList.remove("hidden");
}

// ===== Build Visual Report =====
function buildVisualReport(res){
  function sectionHTML(cat, colorClass, emoji){
    return `
      <div class="report-section ${colorClass}">
        <h2>${emoji} ${cat.charAt(0).toUpperCase()+cat.slice(1)}: ${res[cat]} (${res[cat+"_percent"]}%)</h2>
        <div class="progress-bar"><div class="progress" style="width:${res[cat+"_percent"]}%;background:#fff;"></div></div>
        <p>${descriptions[cat][res[cat]]}</p>
      </div>
    `;
  }
  return sectionHTML("theme","theme","üß†")+
         sectionHTML("style","style","üèÉ")+
         sectionHTML("strength","strength","üí™")+
         sectionHTML("archetype","archetype","üõ°Ô∏è")+
         `<div class="report-section value-add">
            <h2>üåü Value Add</h2>
            <p>Together, your top results demonstrate how you contribute to ET/IDA‚Äôs mission. Combining 
            <span class="highlight">${res.theme}</span> (${res.theme_percent}%), 
            <span class="highlight">${res.style}</span> (${res.style_percent}%), 
            <span class="highlight">${res.strength}</
